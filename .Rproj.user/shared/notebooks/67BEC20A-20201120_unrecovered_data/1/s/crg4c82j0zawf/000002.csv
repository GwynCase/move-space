"0","# Trim HAR07 points."
"0","df <- df %>% filter(id != 'HAR07' | datetime <= ymd('2018-12-31'))"
"0",""
"0","# Calculate days of data."
"0","avail.data <- df %>% group_by(id) %>% "
"0","  mutate(min=min(date), max=max(date), n.points=n(), period=max-min) %>% "
"0","  distinct(id, site, n.points, min, max, period) "
"0",""
"0","# Then join them together."
"0","t.data <- select(avail.data, id, site, period) %>% right_join(captures, by=c('site', 'id')) %>% "
"0","  mutate(period=as.numeric(period), e.time=as.numeric(e.time)) %>% "
"0","  replace_na(list(period=0))"
"0",""
"0","# Calculate percentage of days retrieved."
"0","t.data %>% mutate(p.time=period/e.time*100)"
