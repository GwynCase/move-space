"0","# Import conflict settings."
"0","source('../src/conflicted.R')"
"0",""
"0","#Load some libraries."
"0","library(tidyverse)"
"0","library(sf)"
"0","library(lubridate)"
"0","library(ggplot2)"
"0","library(recurse)"
"0","library(suncalc)"
"0","library(moveHMM)"
"0",""
"0","# Load telemetry data."
"0","tl <- read_csv('../data/processed/telemetry_2018-2019.csv')"
"0",""
"0","# RLK appears to have been missexed. I'll change that here."
"0","tl <- tl %>% mutate(sex = case_when("
"0","  id == 'HAR04' ~ 'm',"
"0","  TRUE ~ sex"
"0","  ))"
"0",""
"0","# Define breeding season."
"0","# Note that this is an updated period."
"0","breeding.2018 <- interval(ymd(20180410), ymd(20180915))"
"0","breeding.2019 <- interval(ymd(20190410), ymd(20190915))"
"0",""
"0","# Select only points that fall within the breeding season."
"0","tl.breeding <- tl %>% "
"0","  filter(date %within% c(breeding.2018, breeding.2019))"
"0",""
"0","# Transform telemetry data to a spatial object and convert to UTMs."
"0","tl.sf <- tl.breeding %>% st_as_sf(coords=c('lon', 'lat')) %>%"
"0","  st_set_crs('+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs') %>%"
"0","  st_transform(""+proj=utm +zone=10 +datum=WGS84 +units=m +no_defs"")"
"0",""
"0","# Convert back to data frame."
"0","tl.sf.c <- tl.sf %>% mutate(xcoord = unlist(map(tl.sf$geometry,1)),"
"0","       ycoord = unlist(map(tl.sf$geometry,2))) %>% "
"0","  data.frame() %>% "
"0","  select(xcoord, ycoord, datetime, id)"
"0",""
"0","# Let's pull out one site to play with. This is the MTC male."
"0","mtc <- filter(tl.sf.c, id == 'HAR09')"
