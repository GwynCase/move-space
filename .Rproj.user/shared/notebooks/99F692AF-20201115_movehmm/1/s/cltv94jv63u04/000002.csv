"0","# Apparently I have to prep my data all. over. again."
"0","# Transform telemetry data to a spatial object and convert to UTMs."
"0","tl.sf <- tl.breeding %>% st_as_sf(coords=c('lon', 'lat')) %>%"
"0","  st_set_crs('+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs') %>%"
"0","  st_transform(""+proj=utm +zone=10 +datum=WGS84 +units=m +no_defs"")"
"0",""
"0","# Convert back to data frame."
"0","tl.sf.c <- tl.sf %>% mutate(xcoord = unlist(map(tl.sf$geometry,1)),"
"0","                            ycoord = unlist(map(tl.sf$geometry,2))) %>%"
"0","  data.frame() %>%"
"0","  select(xcoord, ycoord, datetime, id, period)"
"0",""
"0","# Let's pull out one site to play with. This is the MTC male."
"0","mtc <- tl.sf.c %>% filter(id == 'HAR09' & period == 'day')"
"0",""
"0","# Calculate step length and whatnot."
"0","mtc.d <- prepData(mtc, type='UTM', coordNames=c('xcoord', 'ycoord'))"
"0",""
"0","# Pick how many attempts to make with different starting values."
"0","n.iter <- 25"
"0",""
"0","# Make a list to hold the fitted models once they're made."
"0","all.m <- list()"
"0",""
"0","# Make a for loop to run through multiple starting values."
"0","for(i in 1:n.iter){"
"0","  # Step length mean"
"0","  step.mean.0.i <-runif(2,"
"0","                        min=c(300, 500),"
"0","                        max=c(600, 1750))"
"0","  # Step length standard deviation"
"0","  step.sd.0.i <-runif(2,"
"0","                  min=c(1, 50),"
"0","                  max=c(100, 1500))"
"0","  # Turning angle mean"
"0","  angle.mean.0.i <- c(0, 0)"
"0","  # Turning angle concentration"
"0","  angle.con.0.i <- runif(2,"
"0","                   min=c(0.5, 0.1),"
"0","                   max=c(1, 0.5))"
"0",""
"0","# Fit model."
"0","step.par.0.i <- c(step.mean.0.i, step.sd.0.i, zero.mass.0)"
"0","angle.par.0.i<-c(angle.mean.0.i, angle.con.0.i)"
"0",""
"0","all.m[[i]] <- fitHMM(data=mtc.d, nbStates=2, stepPar0=step.par.0.i, anglePar0=angle.par.0.i)"
"0","}"
