select(id, no.fix, week) %>%
group_by(id, week) %>%
summarize(total=n(), nofix=sum(no.fix)) %>%
ggplot(aes(fill=id, x=week)) +
geom_bar(aes(y=total), position='dodge', stat='identity') +
geom_bar(aes(y=nofix), position='dodge', stat='identity') +
facet_wrap(~id)
df %>%
select(id, no.fix, week) %>%
group_by(id, week) %>%
summarize(total=n(), nofix=sum(no.fix)) %>%
ggplot(aes(fill=id, x=week)) +
geom_bar(aes(y=total), position='stack', stat='identity') +
geom_bar(aes(y=nofix), position='stack', stat='identity') +
facet_wrap(~id)
df %>%
select(id, no.fix, week) %>%
group_by(id, week) %>%
summarize(total=n(), nofix=sum(no.fix)) %>%
ggplot(aes(fill=no.fix, x=week)) +
geom_bar(aes(y=total), position='stack', stat='identity') +
geom_bar(aes(y=nofix), position='stack', stat='identity') +
facet_wrap(~id)
df %>%
select(id, no.fix, week) %>%
group_by(id, week) %>%
summarize(total=n(), nofix=sum(no.fix)) %>%
ggplot(aes(fill=nofix, x=week)) +
geom_bar(aes(y=total), position='stack', stat='identity') +
geom_bar(aes(y=nofix), position='stack', stat='identity') +
facet_wrap(~id)
df %>%
select(id, no.fix, week) %>%
group_by(id, week) %>%
mutate(fix=count(no.fix==0), nofix=count(no.fix==1))
df %>%
select(id, no.fix, week) %>%
group_by(id, week)
df %>%
count(id, week, no.fix)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity')
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_brewer(type='div', palette=1, guide=guide_colorbar())
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_brewer(type='div', palette=1, guide=legend())
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_brewer(type='div', palette=1, guide='legend')
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_brewer(type='div', palette=1)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity')
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
facet_wrap(~id)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('red', 'black'))
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack') +
scale_fill_manual(values=c('red', 'black'))
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, fill=no.fix)) +
geom_bar(position='stack') +
scale_fill_manual(values=c('red', 'black'))
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, fill=no.fix)) +
geom_bar(position='stack') +
scale_fill_manual(values=c('red', 'black')) +
theme_classic() +
facet_wrap(~id)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('red', 'black')) +
theme_classic() +
facet_wrap(~id)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('red', 'black')) +
theme_classic() +
facet_wrap(~id)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
as.factor(no.fix)
df %>%
as.factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('red', 'black')) +
theme_classic() +
facet_wrap(~id)
as.factor(df$no.fix)
df$no.fix <- as.factor(df$no.fix)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('red', 'black')) +
theme_classic() +
facet_wrap(~id)
df %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('black', 'red')) +
theme_classic() +
facet_wrap(~id)
df %>%
as_factor(no.fix)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('black', 'red')) +
theme_classic() +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray3', 'red')) +
theme_classic() +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red')) +
theme_classic() +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='No. of fixes',
labels=c('fix', 'no fix')) +
theme_classic() +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='# fixes/week',
labels=c('fix', 'no fix')) +
theme_classic() +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Number of fixes per week',
labels=c('fix', 'no fix')) +
theme_classic(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Number of fixes per week',
labels=c('fix', 'no fix')) +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Number of fixes per week',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
hour(datetime) %>%
count(id, week, no.fix)
df %>%
as_factor(no.fix) %>%
hour(df$datetime) %>%
count(id, week, no.fix)
library('lubridate')
df %>% hour(datetime)
View(df)
df %>%
as_factor(no.fix) %>%
count(id, time, no.fix) %>%
ggplot(aes(x=time, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, time, no.fix) %>%
ggplot(aes(x=time, y=n, fill=no.fix, width=7200)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
hour(df$datetime)
df %>%
as_factor(no.fix) %>%
count(id, hour(time), no.fix)
df %>%
as_factor(no.fix) %>%
count(id, hour(datetime), no.fix)
df %>%
as_factor(no.fix) %>%
count(id, hour(datetime), no.fix) %>%
ggplot(aes(x=hour(datetime), y=n, fill=no.fix, width=7200)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
hour(datetime) %>%
count(id, datetime, no.fix)
df %>%
as_factor(no.fix) %>%
transmute(hour(datetime)) %>%
count(id, datetime, no.fix)
df %>%
as_factor(no.fix) %>%
mutate(hour=hour(datetime)) %>%
count(id, datetime, no.fix)
df %>%
as_factor(no.fix) %>%
mutate(hour=hour(datetime)) %>%
count(id, hour, no.fix)
df %>%
as_factor(no.fix) %>%
mutate(hour=hour(datetime)) %>%
count(id, hour, no.fix) %>%
ggplot(aes(x=hour, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Time of day') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
mutate(hour=hour(datetime)) %>%
count(id, hour, no.fix) %>%
ggplot(aes(x=hour, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Time of day') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
mutate(hour=hour(datetime)) %>%
count(id, hour, no.fix) %>%
ggplot(aes(x=hour, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Time of day') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
install.packages("rmarkdown"
)
install.packages("rmarkdown")
df %>%
as_factor(no.fix) %>%
mutate(hour=hour(datetime)) %>%
count(id, hour, no.fix) %>%
ggplot(aes(x=hour, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Time of day') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
library('lubridate')
library('tidyverse')
df <- read.csv('../data/processed/telem_all.csv', header=TRUE, stringsAsFactors=FALSE)
# Convert times and dates immediately, just to get it over with.
df$datetime <- ymd_hms(df$datetime, tz='America/Vancouver')
df$date <- date(df$date)
colnames(df)
df %>%
select(site, id, no.fix) %>%
group_by(site, id) %>%
summarize(total=n(), nofix=sum(no.fix)) %>%
mutate(fix=total-nofix, p=nofix/total * 100) %>%
kable(col.names=c('site', 'id', 'total records', 'no fix', 'fix', '% missed'), align='l')
library('lubridate')
library('tidyverse')
library('knitr')
df <- read.csv('../data/processed/telem_all.csv', header=TRUE, stringsAsFactors=FALSE)
# Convert times and dates immediately, just to get it over with.
df$datetime <- ymd_hms(df$datetime, tz='America/Vancouver')
df$date <- date(df$date)
colnames(df)
df %>%
select(site, id, no.fix) %>%
group_by(site, id) %>%
summarize(total=n(), nofix=sum(no.fix)) %>%
mutate(fix=total-nofix, p=nofix/total * 100) %>%
kable(col.names=c('site', 'id', 'total records', 'no fix', 'fix', '% missed'), align='l')
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
library('lubridate')
library('tidyverse')
library('knitr')
df <- read.csv('../data/processed/telem_all.csv', header=TRUE, stringsAsFactors=FALSE)
# Convert times and dates immediately, just to get it over with.
df$datetime <- ymd_hms(df$datetime, tz='America/Vancouver')
df$date <- date(df$date)
colnames(df)
df %>%
select(site, id, no.fix) %>%
group_by(site, id) %>%
summarize(total=n(), nofix=sum(no.fix)) %>%
mutate(fix=total-nofix, p=nofix/total * 100) %>%
kable(col.names=c('site', 'id', 'total records', 'no fix', 'fix', '% missed'), align='l')
df %>%
as_factor(no.fix) %>%
mutate(week=week(datetime)) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
mutate(no.fix=as_factor(no.fix)) %>%
mutate(week=week(datetime)) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
mutate(no.fix=as_factor(as.character(no.fix)) %>%
mutate(week=week(datetime)) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
as_factor(no.fix) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
mutate(no.fix=as_factor(as.character(no.fix))) %>%
mutate(week=week(datetime)) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
mutate(no.fix=as_factor(as.character(no.fix))) %>%
mutate(week=week(datetime)) %>%
count(id, week, no.fix) %>%
ggplot(aes(x=week, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Week') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
df %>%
mutate(no.fix=as_factor(as.character(no.fix))) %>%
mutate(hour=hour(datetime)) %>%
count(id, hour, no.fix) %>%
ggplot(aes(x=hour, y=n, fill=no.fix)) +
geom_bar(position='stack', stat='identity') +
scale_fill_manual(values=c('gray', 'red'), name='Fixes per bird',
labels=c('fix', 'no fix')) +
labs(y='Number of fixes', x='Time of day') +
theme_classic() +
theme(legend.position='bottom') +
facet_wrap(~id)
render("20191204_telemetry_data_exploration.Rmd", "all")
library('rmarkdown')
render("20191204_telemetry_data_exploration.Rmd", "all")
render("/notebooks/20191204_telemetry_data_exploration.Rmd", "all")
